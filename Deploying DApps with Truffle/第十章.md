æ­å–œï¼ä½ å·²ç¶“æˆåŠŸçš„éƒ¨ç½²åˆ°Loomæ¸¬è©¦éˆä¸Šã€‚ä½†ä½ èƒ½çŒœåˆ°æ¥ä¸‹ä¾†æ˜¯ç”šéº¼å—ï¼ŸğŸ¤”

Yupï¼Œæ²’éŒ¯ï¼é€™ä¸€ç« ç¯€æœƒä»”ç´°æ•™ä½ éƒ¨ç½²åœ¨Basechainçš„éç¨‹(é€™æ˜¯æˆ‘å€‘çš„ä¸»ç¶²)ã€‚

é€™è£¡æ˜¯ä½ åœ¨é€™ä¸€ç« ç¯€æ‰€è¦åšçš„ç°¡å–®çš„æµç¨‹ï¼š
+ å‰µå»ºä¸€å€‹æ–°çš„ç§é‘°ã€‚
+ å‰µå»ºä¸€å€‹ç§é‘°æ˜¯å¾ˆç›´æ¥çš„ã€‚ä½†æ˜¯å› ç‚ºæˆ‘å€‘è¦å’Œä¸»ç¶²äº’å‹•ï¼Œæ˜¯æ™‚å€™ä¾†èªçœŸçœ‹å¾…å®‰å…¨æ€§ã€‚å› æ­¤ï¼Œæˆ‘å€‘æœƒç¤ºç¯„å¦‚ä½•å®‰å…¨å‚³é€ç§é‘°çµ¦Truffleã€‚
+ åœ¨truffle.js configurationæª”æ¡ˆä¸­åŠ å…¥ä¸€å€‹æ–°çš„ç‰©ä»¶ä¾†å‘Šè¨´Truffleå¦‚ä½•éƒ¨å±¬åœ¨Basechainä¸Šã€‚
+ å°‡ä½ çš„éƒ¨å±¬é‘°åŒ™åŠ å…¥ç™½åå–®ä¾†è®“ä½ å¯ä»¥éƒ¨ç½²åœ¨Basechainä¸Šã€‚
+ æœ€å¾Œï¼Œæˆ‘å€‘å°‡æ‰€æœ‰æ±è¥¿ç”¨æ™ºèƒ½åˆç´„åŒ…è£¹èµ·ä¾†å¾Œéƒ¨å±¬ã€‚

## Create a new private key
ä½ å·²ç¶“äº†çŸ¥é“è¦å¦‚ä½•å‰µå»ºä¸€å€‹ç§é‘°ã€‚ç„¶è€Œï¼Œæˆ‘å€‘å¿…é ˆè¦æ›´æ”¹ä¸€ä¸‹æˆ‘å€‘å„²å­˜å®ƒçš„æª”æ¡ˆåç¨±ï¼š
```
./loom genkey -a mainnet_public_key -k main_private_key
local address: 0x07419790A773Cc6a2840f1c092240922B61eC778
local address base64: B0GXkKdzzGooQPHAkiQJIrYex3g=
```
## Securely pass the private key to Truffle
ä¸‹ä¸€ä»¶æˆ‘å€‘æƒ³åšçš„äº‹æƒ…æ˜¯è¦é¿å…ç§é‘°æª”æ¡ˆæ¨é€åˆ°GitHubä¸Šã€‚å¦‚æ­¤ï¼Œä¾†å‰µå»ºä¸€å€‹æª”æ¡ˆå«åš.gitibnoreï¼š
```
touch .gitignore
```
ç¾åœ¨è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ä¾†"å‘Šè¨´"GitHubæˆ‘å€‘æƒ³è¦å®ƒå¿½ç•¥æˆ‘å€‘å­˜æ”¾ç§é‘°çš„æª”æ¡ˆï¼š
```
echo mainnet_private_key >> .gitignore
```
ç¾åœ¨æˆ‘å€‘ç¢ºå®šæˆ‘å€‘çš„ç¥•å¯†ä¸æœƒè¢«æ¨é€åˆ°GitHubï¼Œæˆ‘å€‘éœ€è¦ç·¨è¼¯truffle.jså»ºæ§‹æª”æ¡ˆä¾†è®“Truffleå¾é€™å€‹æª”æ¡ˆä¸­è®€å–ç§é‘°ã€‚

ä¾†é–‹å§‹è¼¸å…¥ä¸€äº›æ±è¥¿ï¼š
```
const { readFileSync } = require('fs')
const path = require('path')
const { join } = require('path')
```
æ¥è‘—ï¼Œæˆ‘å€‘æœƒéœ€è¦å®šç¾©å¾æª”æ¡ˆé–±è®€ç§é‘°çš„å‡½å¼ä¸¦ä¸”åˆå§‹åŒ–ä¸€å€‹new LoomTruffleProviderï¼š
```javascript
function getLoomProviderWithPrivateKey (privateKeyPath, chainId, writeUrl, readUrl) {
    const privateKey = readFileSync(privateKey, 'utf-8');
    return new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey);
}
```
å¾ˆç›´æ¥ï¼Œå°å§ï¼Ÿ

## Tell Truffle how to deploy to Basechain
ç¾åœ¨ï¼Œæˆ‘å€‘éœ€è¦è®“TruffleçŸ¥é“å¦‚ä½•éƒ¨ç½²åœ¨Basechainä¸Šã€‚å¦‚æ­¤ï¼Œä¾†åŠ å…¥ä¸€å€‹æ–°çš„ç‰©ä»¶åœ¨truffle.js
```javascript
basechain: {
    provider: function() {
        const chainId = 'default';
        const writeUrl = 'http://basechain.dappchains.com/rpc';
        const readUrl = 'http://basechain.dappchains.com/query';
        return new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey);
        const privateKeyPath = path.join(__dirname, 'mainnet_private_key');
        const loomTruffleProvider = getLoomProviderWithPrivateKey(privateKeyPath, chainId, writeUrl, readUrl);
        return loomtruffleProvider;
    },
    network_id: '*'
}
```
é€™æ™‚å€™ï¼Œä½ çš„truffle.jsæª”æ¡ˆæœƒé•·å¾—åƒä¸‹é¢é€™æ¨£ï¼š
```javascript
// Initialize HDWalletProvider
const HDWalletProvider = require("truffle-hdwallet-provider");

const { readFileSync } = require('fs')
const path = require('path')
const { join } = require('path')


// Set your own mnemonic here
const mnemonic = "YOUR_MNEMONIC";

function getLoomProviderWithPrivateKey (privateKeyPath, chainId, writeUrl, readUrl) {
  const privateKey = readFileSync(privateKeyPath, 'utf-8');
  return new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey);
}

// Module exports to make this configuration available to Truffle itself
module.exports = {
  // Object with configuration for each network
  networks: {
    // Configuration for mainnet
    mainnet: {
      provider: function () {
        // Setting the provider with the Infura Rinkeby address and Token
        return new HDWalletProvider(mnemonic, "https://mainnet.infura.io/v3/YOUR_TOKEN")
      },
      network_id: "1"
    },
    // Configuration for rinkeby network
    rinkeby: {
      // Special function to setup the provider
      provider: function () {
        // Setting the provider with the Infura Rinkeby address and Token
        return new HDWalletProvider(mnemonic, "https://rinkeby.infura.io/v3/YOUR_TOKEN")
      },
      // Network id is 4 for Rinkeby
      network_id: 4
    },

    basechain: {
      provider: function() {
        const chainId = 'default';
        const writeUrl = 'http://basechain.dappchains.com/rpc';
        const readUrl = 'http://basechain.dappchains.com/query';
        return new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey);
        const privateKeyPath = path.join(__dirname, 'mainnet_private_key');
        const loomTruffleProvider = getLoomProviderWithPrivateKey(privateKeyPath, chainId, writeUrl, readUrl);
        return loomTruffleProvider;
        },
      network_id: '*'
    }
  }
};
```

## Whitelist your deployment keys
åœ¨éƒ¨ç½²åœ¨Basechainå‰ï¼Œä½ éœ€è¦å°‡ä½ çš„é‘°åŒ™åŠ å…¥ç™½åå–®ï¼Œè—‰ç”±æˆ‘å€‘çš„[Deploy to Mainnet](https://loomx.io/developers/en/deploy-loom-mainnet.html)æŒ‡ç¤ºã€‚å…ˆåˆ¥æ“”å¿ƒé€™å€‹ï¼Œä½†è¦è¨˜å¾—ä½ åœ¨å®Œæˆé€™å€‹æ•™å­¸å¾Œå†å»åšé€™ä»¶äº‹ã€‚

æˆ‘å€‘å·²ç¶“å…ˆå¹«ä½ å®Œæˆé€™å¹¾æ­¥é©Ÿè€Œç¾åœ¨æˆ‘å€‘å·²ç¶“æº–å‚™å¥½éƒ¨ç½²åœ¨Basechainéˆä¸Šäº†ï¼

## Put it to the test
1. é‹è¡Œ truffle migrate --network basechainã€‚
å¤ªæ£’äº†ï¼Œä½ å·²ç¶“éƒ¨ç½²äº†ä½ çš„æ™ºèƒ½åˆç´„åœ¨Basechainä¸Šï¼ğŸ‘ğŸ»
