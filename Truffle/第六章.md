ç›®å‰ä¸€åˆ‡é †åˆ©ï¼ç¾åœ¨æˆ‘å€‘ç¢ºå®šä½¿ç”¨è€…å¯ä»¥å‰µå»ºæ–°çš„æ®­å±ã€‚ğŸ‘ŒğŸ»

ç„¶è€Œï¼Œå¦‚æœæˆ‘å€‘æŒçºŒå‘¼å«é€™å€‹functionä¾†å‰µå»ºç„¡é™çš„æ®­å±å¤§è»ï¼Œé€™å€‹éŠæˆ²å°±ä¸å¥½ç©äº†ã€‚å› æ­¤ï¼Œåœ¨ [Chapter 4 of Lesson 2](https://cryptozombies.io/zh/lesson/2/chapter/1)æˆ‘å€‘åœ¨ createZombieFunction ä¸­require ä¸€å€‹ç‹€æ…‹ï¼Œä¾†ç¢ºä¿æ¯å€‹ä½¿ç”¨è€…ä¸èƒ½æ“æœ‰è¶…éä¸€å€‹æ®­å±ã€‚

```javascript
require(ownerZombieCount[msg.sender] == 0)
```
ä¾†æ¸¬è©¦é€™å€‹åŠŸèƒ½è¡Œä¸è¡Œã€‚

## Hooks
å†ç­‰ç­‰ğŸ¤ï¼Œæˆ‘å€‘æœƒæœ‰è¶…éä¸€å€‹ä»¥ä¸Šçš„testï¼Œè¦è®“ä»–å€‘å¥½å¥½é‹ä½œå¾—è®“æ¯å€‹testé–‹å§‹æ™‚éƒ½æ˜¯ä¹¾æ·¨çš„ä¸€é ã€‚å› æ­¤ï¼Œåœ¨æ¯ä¸€å€‹testæˆ‘å€‘éƒ½è¦åŠ å…¥ä¸€å€‹æ–°çš„æ™ºèƒ½åˆç´„å¯¦ä¾‹(instance)åƒé€™æ¨£ï¼š
```javascript
const contractInstance = await CryptoZombies.new();
```
å¦‚æœä½ åªéœ€è¦å¯«ä¸€æ¬¡ï¼Œ Truffleå°±æœƒè‡ªå‹•å¹«ä½ åœ¨æ¯ä¸€å€‹testä¸­é‹è¡Œï¼Œé‚£ä¸æ˜¯è¶…è®šå—ï¼Ÿ

Well...Mocha(Truffleä¹Ÿæœ‰)çš„ä¸€å€‹åŠŸèƒ½å°±æ˜¯åœ¨æ¯æ¬¡é–‹å§‹æˆ–çµæŸtestæ™‚runä¸€å°æ®µåç‚º *hooks* çš„codeã€‚è¦åœ¨testé–‹å§‹å‰åŸ·è¡Œçš„è©±ï¼Œé€™æ®µcodeæ‡‰è©²è¦æ”¾åœ¨ä¸€å€‹åç‚ºbeforeEach()çš„å‡½æ•¸ä¸­ã€‚

æ‰€ä»¥ï¼Œèˆ‡å…¶æ¯æ¬¡éƒ½è¦å¯«contract.new()ï¼Œä½ ä¸å¦‚åšä¸€æ¬¡é€™å€‹å°±å¥½ï¼š

```javascript
beforeEach(async () => {
    //åœ¨é€™é‚Šæ”¾å…¥æ¯æ¬¡å‰µå»ºåˆç´„å¯¦ä¾‹æ™‚è¦è·‘çš„code
})
```
æ¥è‘—ï¼ŒTruffleæœƒç…§é¡§å¥½ä¸€åˆ‡ã€‚é€™è¶…æ£’ï¼Œå°å§ï¼Ÿ

## Put it to the test

1. åœ¨åˆå§‹åŒ– alice å’Œ bobçš„ä¸‹é¢ä¸€è¡Œï¼Œå®£å‘Šä¸€å€‹åç‚º contractInstanceçš„ è®Šæ•¸(variable)ï¼Œå…ˆåˆ¥assignä»»ä½•æ±è¥¿
> Noteï¼šæˆ‘å€‘æƒ³è¦å°‡ contractInstanceé™å®šåœ¨ä¸€æ®µå€å¡Šçš„ç¯„åœä¸­ã€‚ç”¨letè€Œä¸æ˜¯varã€‚

2. æ¥è‘—ï¼Œè¤‡è£½è²¼ä¸Šä¸Šé¢é‚£ä¸€å°æ®µå®šç¾©(defined)ç‚º beforeEach()çš„å‡½å¼ã€‚

3. ä¾†å¡«å…¥æˆ‘å€‘çš„æ–°å‡½å¼ã€‚ä¾†åˆ° beforeEach()ä¸­å‰µå»ºæ–°åˆç´„å¯¦ä¾‹çš„é‚£è¡Œã€‚ç¾åœ¨æˆ‘å€‘åœ¨å…¶ä»–åœ°æ–¹å®šç¾©äº† contractInstanceï¼Œä½ å¯ä»¥æŠŠ const qualifierç§»é™¤æ‰ã€‚

4. æˆ‘å€‘çš„testæœƒéœ€è¦ä¸€å€‹ç©ºçš„ it å‡½å¼ï¼Œè¨­å®štestçš„åå­—(å®ƒæœƒæ˜¯æˆ‘å€‘å‚³å…¥itå‡½å¼ä¸­çš„ç¬¬ä¸€å€‹åƒæ•¸)ç­‰æ–¼"should not allow two zombies"ã€‚

æˆ‘å€‘æœƒåœ¨ä¸‹ä¸€ç« ç¯€ç¹¼çºŒå¡«å……é€™å€‹functionï¼

---
## ğŸ§Ÿâ€â™‚ï¸Here be... zombies of every kind!!!ğŸ§Ÿâ€â™‚ï¸

å¦‚æœä½ çœŸçš„ï¼ŒçœŸçš„æƒ³è¦é”åˆ°ç²¾é€šï¼Œå°±ç¹¼çºŒè®€ä¸‹å»ã€‚å¦å‰‡çš„è©±...å°±æŒ‰ä¸‹nextå»é“ä¸‹ä¸€ç« ç¯€å°±å¥½çš„äº†ã€‚

ä½ é‚„åœ¨å•Šï¼ŸğŸ˜

å¤ªæ£’äº†ï¼ç•¢ç«Ÿï¼Œä½ ç‚ºç”šéº¼æœƒæƒ³è¦æ‹’çµ•ä¸€å †è¶…æ£’çš„äº‹ç‰©å‘¢ï¼Ÿ

ç¾åœ¨ï¼Œæˆ‘å€‘å›åˆ° contract.new æ˜¯æ€éº¼é‹ä½œçš„ã€‚åŸºæœ¬ä¸Šï¼Œæ¯æ¬¡æˆ‘å€‘å‘¼å«é€™å€‹å‡½å¼ï¼Œ Truffle æœƒé‹è¡Œå®ƒï¼Œä¾†è®“ä¸€å€‹æ–°åˆç´„è¢«éƒ¨å±¬ã€‚

ä¸€æ–¹é¢ï¼Œé€™å¾ˆæœ‰ç”¨ï¼Œå› ç‚ºé€™è®“æˆ‘å€‘æ¯æ¬¡testé–‹å§‹æ™‚éƒ½æ˜¯ä¹¾æ·¨çš„ä¸€é ã€‚

å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ¯å€‹äººéƒ½å‰µå»ºæ•¸ä¸æ¸…çš„åˆç´„ï¼Œå€å¡Šéˆæœƒè®Šå¾—è¶Šä¾†è¶Šè‡ƒè…«ã€‚

æˆ‘å€‘æƒ³è¦é¿å…é€™ä»¶äº‹æƒ…ç™¼ç”Ÿï¼Œå°å§ï¼Ÿ

å¹¸é‹çš„å¼ï¼Œè§£æ±ºæ–¹æ¡ˆéå¸¸ç›´æ¥...åˆç´„æ‡‰è©²è¦ selfdestructï¼Œä¸€æ—¦æˆ‘å€‘ä¸å†éœ€è¦å®ƒçš„æ™‚å€™ã€‚

é‹è¡Œæ–¹å¼å¦‚ä¸‹ï¼š

+ é¦–å…ˆï¼Œæˆ‘å€‘æœƒè¦åœ¨ CryptoZombies åˆç´„ä¸­åŠ å…¥ä¸€å€‹æ–°çš„functionåƒæ˜¯ï¼š
```javascript
function kill() public onlyOwner {
    selfdestruct (owner();)
}
```

> Noteï¼šå¦‚æœä½ æƒ³è¦æ·±å…¥å­¸ç¿’ selfdestruct()ï¼Œä½ å¯ä»¥é–±è®€é€™è£¡çš„ Solidity docsã€‚è¦è¬¹è¨˜åœ¨å¿ƒçš„äº‹æƒ…æ˜¯ selfdestruct æ˜¯å°‡å€å¡Šéˆä¸Šç‰¹å®šaddressä¸­çš„codeç§»é™¤æ‰çš„å”¯ä¸€æ–¹å¼ã€‚é€™æ˜¯ä¸€å€‹ç›¸ç•¶é‡è¦çš„åŠŸèƒ½ï¼

æ¥ä¸‹ä¾†



---
snippet : a small  and often interesting piece of news, information.
flesh out something: to add more detail when describing something.
flesh ï¼šè¡€è‚‰ã€æœè‚‰
after allï¼šçµ‚ç©¶ã€é‚„æ˜¯æœƒã€ç•¢ç«Ÿ
circle backï¼šç¹å›ä¾†ï¼Œé€™æ˜¯ä¸€å€‹å…¬å¸ç”¨èªã€‚ä½†å› ç‚ºä½¿ç”¨æ°¾æ¿«ï¼Œæœ‰æ™‚æœƒè®Šæˆæ•·è¡åˆ¥äººçš„ç”¨è©ã€‚ä½¿ç”¨é ˆè¬¹æ…ã€‚
bloatï¼šè†¨è„¹ã€è®Šçš„è‡ƒè…«ï¼Œä¸€èˆ¬ä¾†èªªæ˜¯æ…¢æ…¢çš„é‚£ç¨®
hang around ï¼što move or do things slowly